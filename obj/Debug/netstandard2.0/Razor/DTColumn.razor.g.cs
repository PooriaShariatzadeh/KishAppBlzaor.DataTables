#pragma checksum "D:\KishAppBlazor\KishAppBlazor.DataTables\DTColumn.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "6cbc331bac9f0abb6b3ad8eff9f5468f3cd4c741"
// <auto-generated/>
#pragma warning disable 1591
namespace KishAppBlazor.DataTables
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#line 1 "D:\KishAppBlazor\KishAppBlazor.DataTables\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#line 2 "D:\KishAppBlazor\KishAppBlazor.DataTables\DTColumn.razor"
using System.Linq.Expressions;

#line default
#line hidden
    public partial class DTColumn<TRowData> : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#line 3 "D:\KishAppBlazor\KishAppBlazor.DataTables\DTColumn.razor"
       
    [CascadingParameter]
    public DataTable<TRowData> OwnerGrid { get; set; }

    [Parameter]
    public string Title { get; set; }

    [Parameter]
    public Expression<Func<TRowData, object>> Expression { get; set; }

    [Parameter]
    public string Format { get; set; }
    [Parameter]
    public ColumnOrder Order { get; set; }
    [Parameter]
    public bool Orderable { get; set; } = true;
    [Parameter]
    public bool Visible { get; set; } = true;
    [Parameter]
    public bool Searchable { get; set; } = true;
    [Parameter]
    public string Width { get; set; }

    [Parameter]
    public RenderFragment<TRowData> ChildContent { get; set; }

    private Func<TRowData, object> compiledExpression;
    private Expression lastCompiledExpression;
    private RenderFragment headerTemplate;
    private RenderFragment<TRowData> cellTemplate;



    protected override void OnInitialized()
    {
        OwnerGrid.AddColumn(this);
    }

    protected override void OnParametersSet()
    {
        if (lastCompiledExpression != Expression)
        {
            compiledExpression = Expression?.Compile();
            lastCompiledExpression = Expression;
        }
    }

    internal RenderFragment HeaderTemplate
    {
        get
        {
            return headerTemplate = (builder =>
            {
                builder.OpenElement(0, "th");
                builder.AddContent(1, Title);
                builder.CloseElement();
            });
        }
    }

    internal RenderFragment<TRowData> CellTemplate
    {
        get
        {
            return cellTemplate = (rowData => builder =>
            {
                builder.OpenElement(0, "td");
                if (compiledExpression != null)
                {
                    var value = compiledExpression(rowData);
                    var formattedValue = string.IsNullOrEmpty(Format) ? value?.ToString() : string.Format("{0:" + Format + "}", value);
                    builder.AddContent(1, formattedValue);
                }
                else
                {
                    builder.AddContent(2, ChildContent, rowData);
                }

                builder.CloseElement();
            });
        }
    }


#line default
#line hidden
    }
}
#pragma warning restore 1591
